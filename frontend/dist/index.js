(()=>{"use strict";var __webpack_modules__={623:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n;// CONCATENATED MODULE: ./src/js/core/Component.js\nclass Component {\n  constructor(tag, $parent) {\n    let props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let beforeElem = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    this.$target = document.createElement(tag);\n\n    if (props.class) {\n      this.$target.classList.add(...props.class);\n    }\n\n    if (props.dataset) {\n      for (const [key, value] of Object.entries(props.dataset)) {\n        this.$target.dataset[key] = value;\n      }\n    }\n\n    this.props = props;\n    this.state = {};\n    this.setup();\n    this.setEvent(); // constructor 에서 딱 한번만 실행.\n\n    this.render();\n\n    if (!beforeElem) {\n      $parent.appendChild(this.$target);\n    } else if (typeof beforeElem === 'string') {\n      console.log($parent.querySelector(beforeElem));\n      $parent.insertBefore(this.$target, $parent.querySelector(beforeElem));\n    } else {\n      $parent.insertBefore(this.$target, beforeElem);\n    }\n  }\n\n  clearChildren() {\n    this.$target.innerHTML = this.template();\n  }\n\n  setChildren() {}\n\n  setup() {} // 컴포넌트 생성 시 딱 한번만 실행\n\n\n  mounted() {} // render 후에 실행되는 부분\n\n\n  template() {\n    return '';\n  } // 컴포넌트 템플릿\n\n\n  render() {\n    // 렌더링\n    this.$target.innerHTML = this.template();\n    this.setChildren();\n    this.mounted(); // render 후에 mounted 가 실행된다.\n  }\n\n  setEvent() {}\n\n  setState(newState) {\n    // 상태변경되면 리렌더링\n    this.state = { ...this.state,\n      ...newState\n    };\n    this.render();\n  }\n\n  addEvent(eventType, selector, callback) {\n    const children = [...this.$target.querySelectorAll(selector)]; // selector에 명시한 것 보다 더 하위 요소가 선택되는 경우가 있을 땐\n    // closest를 이용하여 처리한다.\n\n    const isTarget = target => children.includes(target) || target.closest(selector);\n\n    this.$target.addEventListener(eventType, event => {\n      if (!isTarget(event.target)) return false;\n      callback(event);\n    });\n  }\n\n}\n\n/* harmony default export */ const core_Component = (Component);\n;// CONCATENATED MODULE: ./src/js/components/Header.js\n\n\nclass Header extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  template() {\n    return `<h1>TO-DO LIST</h1>\n    <button class=\"menu\"></button>`;\n  }\n\n  setEvent() {\n    this.addEvent('click', '.menu', this.props.onClick);\n  }\n\n}\n\n/* harmony default export */ const components_Header = (Header);\n;// CONCATENATED MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n;// CONCATENATED MODULE: ./mock/mock.js\nconst processedData = {\n  1: {\n    title: '해야할 일',\n    todos: [{\n      id: '1',\n      title: '코딩하기',\n      content: '코딩을 사랑해',\n      column_id: '1',\n      index: '0'\n    }, {\n      id: '4',\n      title: '코딩하기',\n      content: '코딩을 사랑해',\n      column_id: '1',\n      index: '1'\n    }, {\n      id: '5',\n      title: '춤추기',\n      content: '하이',\n      column_id: '1',\n      index: '2'\n    }]\n  },\n  2: {\n    title: '진행중인 일',\n    todos: [{\n      id: '2',\n      title: '코딩하기',\n      content: '코딩을 사랑해',\n      column_id: '2',\n      index: '0'\n    }]\n  },\n  3: {\n    title: '완료된 일',\n    todos: [{\n      id: '3',\n      title: '코딩하기',\n      content: '코딩을 사랑해',\n      column_id: '3',\n      index: '0'\n    }, {\n      id: '6',\n      title: '커피사기',\n      content: '내일까지 프론트',\n      column_id: '3',\n      index: '1'\n    }]\n  }\n};\nconst logData = [{\n  id: '1',\n  type: 'move',\n  userName: '한진탁',\n  toDoTitle: '코딩하기',\n  toDoColumnId: '1',\n  nextToDoColumnId: '2',\n  date: new Date()\n}, {\n  id: '2',\n  type: 'remove',\n  userName: '이주암',\n  toDoTitle: '밥먹기',\n  toDoColumnId: '1',\n  nextToDoColumnId: null,\n  date: new Date('2022-07-11T03:24:00')\n}, {\n  id: '3',\n  type: 'add',\n  userName: '한진탁',\n  toDoTitle: '운동하기',\n  toDoColumnId: '1',\n  nextToDoColumnId: null,\n  date: new Date()\n}, {\n  id: '4',\n  type: 'move',\n  userName: '이주암',\n  toDoTitle: '공부하기',\n  toDoColumnId: '2',\n  nextToDoColumnId: '1',\n  date: new Date()\n}, {\n  id: '5',\n  type: 'add',\n  userName: '한진탁',\n  toDoTitle: '쇼핑하기',\n  toDoColumnId: '3',\n  nextToDoColumnId: null,\n  date: new Date()\n}];\n/* harmony default export */ const mock = (processedData);\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoColumn/TodoColumnHeader.js\n\n\nclass TodoColumnHeader extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  template() {\n    return `\n\t\t<div>\n\t\t\t<h3>${this.props.title}</h3>\n\t\t\t<span class=\"count\">${this.props.count}</span>\n\t\t</div>\n\t\t<div>\n\t\t\t<button class='todo-add-btn'></button>\n\t\t\t<button class='column-remove-btn'</button>\n\t\t</div>\n\t`;\n  }\n\n}\n\n/* harmony default export */ const TodoColumn_TodoColumnHeader = (TodoColumnHeader);\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoColumn/TodoCard.js\n\n\nclass TodoCard extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  template() {\n    const {\n      title,\n      content\n    } = this.props.todo;\n    return `\n    <header>\n      <h4>${title}</h4>\n      <button class=\"card-close-btn\"></button>\n    </header>\n    <p class=\"card-content\">${content}</p>\n    <p class=\"card-author\">author by web</p>\n\t`;\n  }\n\n}\n\n/* harmony default export */ const TodoColumn_TodoCard = (TodoCard);\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoColumn/TodoList.js\n\n\n\nclass TodoList extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  setChildren() {\n    const {\n      todos\n    } = this.props;\n    todos.forEach(todo => new TodoColumn_TodoCard('li', this.$target, {\n      class: ['todo-card'],\n      todo,\n      dataset: {\n        todoId: todo.id,\n        index: todo.index\n      }\n    }));\n  }\n\n}\n\n/* harmony default export */ const TodoColumn_TodoList = (TodoList);\n;// CONCATENATED MODULE: ./src/js/events/todoDragEvent.js\nlet ghost;\nlet subTarget;\nfunction moveAt(target, pageX, pageY) {\n  target.style.left = pageX - target.offsetWidth / 2 + 'px';\n  target.style.top = pageY - target.offsetHeight / 2 + 'px';\n}\nfunction onMouseMove(target) {\n  ghost = target.cloneNode(true);\n  ghost.classList.add('ghost');\n  subTarget = target.cloneNode(true);\n  subTarget.classList.add('afterimage', 'subTarget');\n  document.body.appendChild(ghost);\n  ghost.style.display = 'none';\n  return event => {\n    var _subTarget$previousEl, _subTarget$nextElemen;\n\n    target.classList.add('afterimage');\n    ghost.style.position = 'absolute';\n    ghost.style.display = 'list-item';\n    ghost.style.zIndex = 1000;\n    ghost.style.width = window.getComputedStyle(target).width;\n    ghost.style.zIndex = window.getComputedStyle(target).height;\n    moveAt(ghost, event.pageX, event.pageY);\n    let [belowCard, todoList] = getPosition(event);\n\n    if (!todoList) {\n      var _subTarget$parentNode;\n\n      (_subTarget$parentNode = subTarget.parentNode) === null || _subTarget$parentNode === void 0 ? void 0 : _subTarget$parentNode.removeChild(subTarget);\n      return;\n    }\n\n    if (belowCard !== null && belowCard !== void 0 && belowCard.classList.contains('afterimage')) {\n      return;\n    }\n\n    if (!belowCard) {\n      todoList.appendChild(subTarget);\n      return;\n    }\n\n    if (dropPointIsUpper(belowCard, event.clientY)) {\n      todoList.insertBefore(subTarget, belowCard);\n    } else {\n      todoList.insertBefore(subTarget, belowCard.nextElementSibling);\n    }\n\n    if ((_subTarget$previousEl = subTarget.previousElementSibling) !== null && _subTarget$previousEl !== void 0 && _subTarget$previousEl.classList.contains('afterimage') || (_subTarget$nextElemen = subTarget.nextElementSibling) !== null && _subTarget$nextElemen !== void 0 && _subTarget$nextElemen.classList.contains('afterimage')) {\n      subTarget.parentNode.removeChild(subTarget);\n      return;\n    }\n  };\n}\n\nfunction getPosition(e) {\n  let belowCard;\n  ghost.style.display = 'none';\n  let elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n  ghost.style.display = 'list-item';\n  let todoList = getTodoList(elemBelow);\n\n  if (!todoList) {\n    return [belowCard, todoList];\n  }\n\n  if (elemBelow.closest('.todo-card')) {\n    belowCard = elemBelow.closest('.todo-card');\n  } else {\n    belowCard = getClosestCardElement(todoList.childNodes, e.clientY);\n  }\n\n  return [belowCard, todoList];\n}\n\nfunction mouseUp(e) {\n  let prevColumnId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n  let [belowCard, todoList] = getPosition(e);\n\n  if (!todoList) {\n    document.body.removeChild(ghost);\n    return false;\n  }\n\n  ghost.removeAttribute('style');\n  ghost.parentNode.removeChild(ghost);\n  ghost = null;\n\n  if (!subTarget.parentNode) {\n    return false;\n  }\n\n  subTarget.classList.remove('afterimage');\n  subTarget.classList.remove('subTarget');\n  const index = getIndex(subTarget, prevColumnId);\n  const nextTodoList = subTarget.closest('.todo-list');\n  subTarget.dataset.index = index;\n  subTarget = null;\n  return [String(index), nextTodoList];\n}\n\nfunction getIndex(subTarget, prevColumnId) {\n  var _subTarget$nextElemen2;\n\n  const currentColumnId = subTarget.closest('.column').dataset.columnId;\n  let result = (_subTarget$nextElemen2 = subTarget.nextElementSibling) === null || _subTarget$nextElemen2 === void 0 ? void 0 : _subTarget$nextElemen2.dataset.index;\n\n  if (!result) {\n    result = currentColumnId === prevColumnId ? subTarget.parentNode.childNodes.length - 2 : subTarget.parentNode.childNodes.length - 1;\n  }\n\n  return result;\n}\n\nfunction getTodoList(elemBelow) {\n  if (!elemBelow) {\n    return null;\n  }\n\n  if (elemBelow.closest('.column ul')) {\n    return elemBelow.closest('.column ul');\n  }\n\n  if (elemBelow.classList.contains('column')) {\n    return elemBelow.querySelector('ul');\n  }\n\n  return null;\n}\n\nfunction getClosestCardElement(todoList, dropYPoint) {\n  const closestCard = {\n    offset: Number.POSITIVE_INFINITY,\n    element: null\n  };\n  todoList.forEach(card => {\n    const box = card.getBoundingClientRect();\n    const boxMidYPoint = box.top + box.height / 2;\n    const offset = Math.abs(dropYPoint - boxMidYPoint);\n\n    if (offset < closestCard.offset) {\n      closestCard.offset = offset;\n      closestCard.element = card;\n    }\n  });\n  return closestCard.element;\n}\n\nfunction dropPointIsUpper(belowCard, currentY) {\n  const box = belowCard.getBoundingClientRect();\n  const boxMidPoint = box.top + box.height / 2;\n  const offset = currentY - boxMidPoint;\n  return offset < 0;\n}\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoColumn/TodoColumn.js\n\n\n\n\n\nclass TodoColumn extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  setChildren() {\n    const {\n      title,\n      todos\n    } = this.props.columnData;\n    new TodoColumn_TodoColumnHeader('header', this.$target, {\n      title,\n      count: todos.length,\n      showTodoAddForm: this.props.showTodoAddForm\n    });\n    new TodoColumn_TodoList('ul', this.$target, {\n      class: ['todo-list'],\n      todos: todos.sort((a, b) => a.index - b.index)\n    });\n  }\n\n  setEvent() {\n    this.addEvent('mouseover', '.card-close-btn', e => {\n      const targetCard = e.target.closest('.todo-card');\n      targetCard.classList.add('warning');\n    });\n    this.addEvent('mouseout', '.card-close-btn', e => {\n      const targetCard = e.target.closest('.todo-card');\n      targetCard.classList.remove('warning');\n    });\n    this.addEvent('mousedown', '.column', e => {\n      if (e.detail !== 1) return;\n      const todoCard = e.target.closest('.todo-card');\n\n      if (!todoCard || e.target.tagName === 'BUTTON') {\n        return;\n      }\n\n      const handleMouseMove = onMouseMove(todoCard);\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', e => {\n        todoCard.classList.remove('afterimage');\n        document.removeEventListener('mousemove', handleMouseMove);\n        const ghost = document.querySelector('.ghost');\n        const subTarget = document.querySelector('.subTarget');\n\n        if (ghost && subTarget) {\n          const prevColumnId = todoCard.closest('.column').dataset.columnId;\n          const currentTodoId = todoCard.dataset.todoId;\n          const DIV = document.createElement('div');\n          const UL = todoCard.parentNode;\n          const belowNode = [];\n          let flag = false;\n          DIV.classList.add('card-pocket');\n          UL.insertBefore(DIV, todoCard.nextElementSibling);\n          todoCard.classList.add('fade');\n          todoCard.parentNode.childNodes.forEach(item => {\n            if (item.tagName === 'DIV') return;\n            flag && belowNode.push(item);\n\n            if (item.classList.contains('fade')) {\n              flag = true;\n            }\n          });\n          belowNode.forEach(node => DIV.appendChild(node));\n          DIV.style.transform = `translateY(-${todoCard.offsetHeight}px)`;\n          document.body.style.pointerEvents = 'none';\n          const xDiff = ghost.getBoundingClientRect().x - subTarget.getBoundingClientRect().x;\n          const yDiff = ghost.getBoundingClientRect().y - subTarget.getBoundingClientRect().y;\n          ghost.style.transform = `translate(${xDiff * -1}px, ${yDiff * -1}px)`;\n          setTimeout(() => {\n            const nodeList = [];\n            let index;\n            let nextTodoList;\n            DIV.childNodes.forEach(node => {\n              nodeList.push(node);\n            });\n            nodeList.forEach(node => UL.insertBefore(node, UL.querySelector('.card-pocket')));\n            DIV.parentNode.removeChild(DIV);\n            document.body.removeAttribute('style');\n            [index, nextTodoList] = mouseUp(e, prevColumnId);\n\n            if (!index) {\n              return;\n            }\n\n            nextTodoList.childNodes.forEach(node => {\n              if (index < node.dataset.index) {\n                node.dataset.index = String(Number(node.dataset.index) + 1);\n              }\n\n              if (node.dataset.index === index) {\n                index -= 1;\n                return;\n              }\n\n              if (index < node.dataset.index) {\n                node.dataset.index = String(Number(node.dataset.index) + 1);\n              }\n            });\n            this.props.onDragEnd(todoCard.dataset.todoId, prevColumnId, nextTodoList.closest('.column').dataset.columnId);\n            todoCard.parentNode.removeChild(todoCard);\n          }, 500);\n          return;\n        }\n\n        if (!mouseUp(e)[0]) {\n          return;\n        }\n\n        console.log('??');\n        todoCard.parentNode.removeChild(todoCard);\n      }, {\n        once: true\n      });\n    });\n  }\n\n}\n\n/* harmony default export */ const TodoColumn_TodoColumn = (TodoColumn);\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoAddForm.js\n\n\nclass TodoAddForm extends core_Component {\n  constructor() {\n    super(...arguments);\n    this.$title = this.$target.querySelector('.add-form-title');\n    this.$content = this.$target.querySelector('.add-form-content');\n    this.$submitBtn = this.$target.querySelector('.add-form-submit');\n  }\n\n  template() {\n    const {\n      type,\n      title: originTitle,\n      content: originContent\n    } = this.props;\n    const title = originTitle ?? '';\n    const content = originContent ?? '';\n    const btnName = type === 'edit' ? '수정' : '등록';\n    return `\n\t\t\t\t<input class='add-form-title' type='text' placeholder='제목을 입력하세요' name=\"title\" value=\"${title}\" />\n\t\t\t\t<textarea class='add-form-content' type='text' placeholder='내용을 입력하세요' name=\"content\" maxlength=\"500\">${content}</textarea>\n\t\t\t\t<div>\n\t\t\t\t<button class='add-form-cancel primary-btn--gray' type='button'>취소</button>\n\t\t\t\t<button class='add-form-submit primary-btn--blue' type='submit' disabled=\"true\">${btnName}</button>\n\t\t\t\t </div>\n\t\t`;\n  }\n\n  setEvent() {\n    const isDisabled = _ref => {\n      let {\n        originTitle,\n        originContent,\n        title,\n        content\n      } = _ref;\n      if (!title || !content) return true;else if (originTitle === title && originContent === content) return true;\n      return false;\n    };\n\n    this.addEvent('input', '.add-form-content', e => {\n      e.target.style.height = '16px';\n      e.target.style.height = e.target.scrollHeight + 'px';\n    });\n    ['input', 'textarea'].forEach(type => {\n      this.addEvent('input', type, () => {\n        const {\n          title: originTitle,\n          content: originContent\n        } = this.props;\n        const [title, content] = [this.$title.value.trim(), this.$content.value.trim()];\n\n        if (isDisabled({\n          originTitle,\n          originContent,\n          title,\n          content\n        })) {\n          this.$submitBtn.disabled = true;\n          this.$target.classList.add('blocked');\n        } else {\n          this.$submitBtn.disabled = false;\n          this.$target.classList.remove('blocked');\n        }\n      });\n    });\n  }\n\n}\n\n/* harmony default export */ const TodoContainer_TodoAddForm = (TodoAddForm);\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/modal.js\n\n\nclass Modal extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  template() {\n    return `\n            <div class=\"modal\">\n                <p>선택한 카드를 삭제할까요?</p>\n                <div>\n                    <button class=\"modal-cancel-btn primary-btn--gray\">취소</button> \n                    <button class=\"modal-remove-btn primary-btn--blue\">삭제</button> \n                </div>\n            </div>\n        `;\n  }\n\n  setEvent() {\n    this.addEvent('click', '.modal-cancel-btn', this.props.closeModal);\n    this.addEvent('click', '.modal-remove-btn', this.props.removeCard);\n    this.addEvent('click', '.modal-container', e => {\n      if (e.target.classList.contains('modal-container')) this.props.closeModal();\n    });\n  }\n\n}\n\n/* harmony default export */ const modal = (Modal);\n;// CONCATENATED MODULE: ./src/js/api/todos.js\nfunction addTodo() {\n  return new Promise(res => res(90));\n}\nfunction editTodo(todoId) {\n  return new Promise(res => res(todoId));\n}\nfunction removeTodo(todoId) {\n  return new Promise(res => res(todoId));\n}\nfunction updateTodo() {\n  return new Promise(res => res(123));\n}\n;// CONCATENATED MODULE: ./src/js/components/TodoContainer/TodoContainer.js\n\n\n\n\n\n\n\n\n\nclass TodoContainer extends core_Component {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"setDragAndDropState\", (todoId, prevColumnId, nextColumnId) => {\n      updateTodo().then(() => {\n        const todoIndex = this.state.columnData[prevColumnId].todos.findIndex(todo => todo.id === todoId);\n        const todo = this.state.columnData[prevColumnId].todos[todoIndex];\n        const prevColumn = this.state.columnData[prevColumnId].todos.filter(todo => {\n          return todo.id !== todoId;\n        });\n        const nextColumn = this.state.columnData[nextColumnId].todos.push(todo);\n        this.state.columnData[prevColumnId].todos = prevColumn;\n        this.setState({ ...this.state\n        });\n      });\n    });\n\n    _defineProperty(this, \"createTodoCard\", _ref => {\n      let {\n        $parent,\n        props = {},\n        $beforeElement\n      } = _ref;\n      const classList = [...(props.class || []), 'todo-card'];\n      const todoId = props.todoId;\n      const index = props.index;\n\n      if (todoId) {\n        // todoId가 있을 때\n        // edit\n        editTodo().then(() => {\n          const elem = new TodoColumn_TodoCard('li', $parent, { ...props,\n            class: classList,\n            dataset: {\n              todoId\n            }\n          }, $beforeElement);\n          const columnId = document.querySelector(`[data-todo-id='${todoId}']`).closest('.column').dataset.columnId;\n          const todo = {\n            id: todoId,\n            title: props.todo.title,\n            content: props.todo.content,\n            columnId,\n            index\n          };\n          let target = this.state.columnData[columnId].todos.findIndex(item => item.id == todoId);\n          this.state.columnData[columnId].todos[target] = { ...todo\n          };\n          this.setState({ ...this.state\n          });\n          this.removePrevCard();\n          this.removeAddForm();\n        });\n      } else {\n        // todoId가 없을 때\n        // add\n        addTodo().then(id => {\n          new TodoColumn_TodoCard('li', $parent, { ...props,\n            class: classList,\n            dataset: {\n              todoId: id\n            }\n          }, $beforeElement);\n          const columnId = document.querySelector(`[data-todo-id='${id}']`).closest('.column').dataset.columnId;\n          const todo = {\n            id: id,\n            title: props.todo.title,\n            content: props.todo.content,\n            columnId,\n            index: this.state.columnData[columnId].todos.length\n          };\n          this.state.columnData[columnId].todos.push(todo);\n          this.setState({ ...this.state\n          });\n          this.removePrevCard();\n          this.removeAddForm();\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleTodoCard\", {\n      editStart: this.createAddForm,\n      addStart: this.createAddForm,\n      confirmEditTodo: this.createTodoCard,\n      confirmAddTodo: this.createTodoCard\n    });\n\n    this.columns = {};\n    this.addForm = null;\n    this.prevCard = null;\n  }\n\n  setup() {\n    new Promise(resolve => resolve(mock)).then(res => {\n      const columnData = {};\n      Object.keys(res).forEach(key => columnData[key] = { ...res[key]\n      });\n      this.setState({\n        columnData\n      });\n    });\n  }\n\n  setChildren() {\n    this.clearChildren();\n    this.columns = {};\n\n    if (!this.state.columnData) {\n      return;\n    }\n\n    for (const key in this.state.columnData) {\n      this.columns[key] = new TodoColumn_TodoColumn('div', this.$target, {\n        class: ['column'],\n        dataset: {\n          columnId: key\n        },\n        columnData: this.state.columnData[key],\n        onDragEnd: this.setDragAndDropState\n      });\n    }\n  }\n\n  setEvent() {\n    this.addEvent('click', '.column', e => {\n      e.preventDefault();\n      const $column = e.target.closest('.column');\n      const $clickedTarget = e.target;\n\n      if ($clickedTarget.classList.contains('todo-add-btn')) {\n        this.addStart($column);\n      } else if ($clickedTarget.classList.contains('add-form-cancel')) {\n        this.cancelAddTodo();\n      } else if ($clickedTarget.classList.contains('add-form-submit')) {\n        this.confirmAddTodo($clickedTarget);\n      } else if ($clickedTarget.classList.contains('card-close-btn')) {\n        const $todoCard = $clickedTarget.closest('.todo-card');\n        this.modal ? this.closeModal() : this.openModal($todoCard);\n      }\n    });\n    this.addEvent('dblclick', '.todo-card', e => {\n      const $todoCard = e.target.closest('.todo-card');\n      this.editStart($todoCard);\n    });\n  }\n\n  addStart($column) {\n    const $parent = $column.querySelector('.todo-list');\n    const $beforeElement = $parent.querySelector('ul > li:first-child');\n    let $newAddForm = null; // 해당 컬럼이 add-form 이 아닌 경우 해당 컬럼에 add-form 생성\n\n    if (($beforeElement === null || $beforeElement === void 0 ? void 0 : $beforeElement.dataset.type) !== 'add') {\n      $newAddForm = this.handleTodoCard['addStart']({\n        $parent,\n        $beforeElement,\n        props: {\n          dataset: {\n            type: 'add'\n          }\n        }\n      }); // 기존에 열려있던 addForm 닫기\n\n      this.removeAddForm($newAddForm);\n      this.prevCard && this.handlePrevCard();\n    } // 해당 컬럼이 add-form 이었던 경우\n    else {\n      this.removeAddForm();\n    }\n  }\n\n  cancelAddTodo() {\n    this.removeAddForm();\n    this.handlePrevCard();\n  }\n\n  confirmAddTodo($addFormSubmitBtn) {\n    const $todoAddForm = $addFormSubmitBtn.closest('.todo-add-form');\n    const todo = {\n      title: $todoAddForm.querySelector('.add-form-title').value,\n      content: $todoAddForm.querySelector('.add-form-content').value\n    };\n    const $parent = $todoAddForm.parentNode;\n    this.handleTodoCard['confirmAddTodo']({\n      $parent,\n      $beforeElement: $todoAddForm,\n      props: {\n        todo,\n        todoId: $todoAddForm.dataset.todoId,\n        index: $todoAddForm.dataset.todoId\n      }\n    });\n  }\n\n  editStart($beforeElement) {\n    const props = {\n      type: 'edit',\n      title: $beforeElement.querySelector('h4').innerText,\n      content: $beforeElement.querySelector('.card-content').innerText,\n      dataset: {\n        todoId: $beforeElement.dataset.todoId,\n        index: $beforeElement.dataset.index,\n        type: 'edit'\n      }\n    };\n    const $parent = $beforeElement.parentNode;\n    const $newAddForm = this.handleTodoCard['editStart']({\n      $parent,\n      $beforeElement,\n      props\n    });\n    this.removeAddForm($newAddForm);\n    this.handlePrevCard($beforeElement);\n  }\n\n  removeAddForm($newAddForm) {\n    var _this$addForm, _this$addForm2;\n\n    (_this$addForm = this.addForm) === null || _this$addForm === void 0 ? void 0 : _this$addForm.$target.parentNode.removeChild((_this$addForm2 = this.addForm) === null || _this$addForm2 === void 0 ? void 0 : _this$addForm2.$target);\n    this.addForm = $newAddForm;\n  }\n\n  handlePrevCard($newPrevCard) {\n    if (this.prevCard) {\n      this.prevCard.style.display = 'list-item';\n    }\n\n    this.prevCard = $newPrevCard;\n    this.prevCard && (this.prevCard.style.display = 'none');\n  }\n\n  removePrevCard() {\n    this.prevCard && this.prevCard.parentNode.removeChild(this.prevCard);\n    this.prevCard = null;\n  }\n\n  createAddForm(_ref2) {\n    let {\n      $parent,\n      props = {},\n      $beforeElement\n    } = _ref2;\n    const classList = [...(props.class || []), 'todo-add-form'];\n    return new TodoContainer_TodoAddForm('li', $parent, { ...props,\n      class: [...classList, 'blocked']\n    }, $beforeElement);\n  }\n\n  openModal($todoCard) {\n    const removeCard = () => {\n      const columnId = $todoCard.closest('.column').dataset.columnId;\n      const todoId = $todoCard.dataset.todoId;\n      removeTodo(todoId).then(() => {\n        let index = -1;\n        this.state.columnData[columnId].todos = this.state.columnData[columnId].todos.filter(todo => {\n          if (todo.id === todoId) {\n            index = todo.index;\n          }\n\n          return todo.id !== todoId;\n        }).map(todo => {\n          if (index < todo.index) {\n            todo.index -= 1;\n          }\n\n          return todo;\n        });\n        this.setState({ ...this.state\n        });\n      });\n      this.closeModal();\n    };\n\n    this.modal = new modal('div', document.querySelector('body'), {\n      class: ['modal-container'],\n      removeCard,\n      closeModal: this.closeModal.bind(this)\n    });\n  }\n\n  closeModal() {\n    const $modal = this.modal.$target;\n    $modal.parentNode.removeChild($modal);\n    this.modal = null;\n  }\n\n}\n\n/* harmony default export */ const TodoContainer_TodoContainer = (TodoContainer);\n;// CONCATENATED MODULE: ./src/js/utils/logTypeMap.js\nfunction move(_ref) {\n  let {\n    todoTitle,\n    todoColumn,\n    nextTodoColumn\n  } = _ref;\n  return `${todoTitle}을/를 ${todoColumn}에서 ${nextTodoColumn}으로 이동하였습니다.`;\n}\n\nfunction add(_ref2) {\n  let {\n    todoTitle,\n    todoColumn\n  } = _ref2;\n  return `${todoColumn}에 ${todoTitle}을/를 등록하였습니다.`;\n}\n\nfunction remove(_ref3) {\n  let {\n    todoTitle,\n    todoColumn\n  } = _ref3;\n  return `${todoColumn}에서 ${todoTitle}을/를 삭제하였습니다.`;\n}\n\nconst logData2Desc = {\n  move: move,\n  add: add,\n  remove: remove\n};\n/* harmony default export */ const logTypeMap = (logData2Desc);\n;// CONCATENATED MODULE: ./src/js/utils/timeDiff.js\nfunction timeDiff(_ref) {\n  let {\n    date: createdAt\n  } = _ref;\n  const milliSeconds = new Date() - createdAt;\n  const seconds = milliSeconds / 1000;\n  if (seconds < 60) return `방금 전`;\n  const minutes = seconds / 60;\n  if (minutes < 60) return `${Math.floor(minutes)}분 전`;\n  const hours = minutes / 60;\n  if (hours < 24) return `${Math.floor(hours)}시간 전`;\n  const days = hours / 24;\n  if (days < 7) return `${Math.floor(days)}일 전`;\n  const weeks = days / 7;\n  if (weeks < 5) return `${Math.floor(weeks)}주 전`;\n  const months = days / 30;\n  if (months < 12) return `${Math.floor(months)}개월 전`;\n  const years = days / 365;\n  return `${Math.floor(years)}년 전`;\n}\n\n/* harmony default export */ const utils_timeDiff = (timeDiff);\n;// CONCATENATED MODULE: ./src/assets/user_avatar_img.svg\nconst user_avatar_img_namespaceObject = __webpack_require__.p + \"8d34a4791ea44e0658f2.svg\";\n;// CONCATENATED MODULE: ./src/js/components/TodoLog/TodoLog.js\n\n\n\n\n\nclass TodoLog extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  template() {\n    const {\n      type,\n      date\n    } = this.props.logData;\n    return `<img src=\"${user_avatar_img_namespaceObject}\" alt=\"Avatart\" />\n    <div class=\"log__content\">\n      <div class=\"user\">@sam</div>\n      <div class=\"log-content\">\n      \t${logTypeMap[type](this.props.logData)}\n      </div>\n      <div class=\"time\">${utils_timeDiff({\n      date\n    })}</div>\n    </div>`;\n  }\n\n}\n\n/* harmony default export */ const TodoLog_TodoLog = (TodoLog);\n;// CONCATENATED MODULE: ./src/js/components/TodoLog/TodoLogContainer.js\n\n\n\n\nclass TodoLogContainer extends core_Component {\n  constructor() {\n    super(...arguments);\n  }\n\n  setup() {\n    new Promise(resolve => resolve(logData)).then(res => {\n      this.setState({\n        logData: res\n      });\n    });\n  }\n\n  template() {\n    return `<header>\n      <button class=\"log-close-btn\"></button>\n\t\t\t</header>\n\t\t\t<ul class=\"log-list\"></ul>\n\t\t\t`;\n  }\n\n  setChildren() {\n    this.clearChildren();\n    console.log(this.state.logData);\n    this.state.logData && this.state.logData.forEach(item => new TodoLog_TodoLog('li', this.$target.querySelector('.log-list'), {\n      logData: item\n    }));\n  }\n\n  setEvent() {\n    this.addEvent('click', '.log-close-btn', () => this.$target.classList.remove('visible'));\n  }\n\n}\n\n/* harmony default export */ const TodoLog_TodoLogContainer = (TodoLogContainer);\n;// CONCATENATED MODULE: ./src/js/app.js\n\n\n\n\nclass App {\n  constructor($target) {\n    this.$target = $target;\n    this.$todoLogContainer = null;\n    this.setup();\n  }\n\n  setup() {\n    new components_Header('header', this.$target, {\n      class: ['header', 'hi'],\n      onClick: () => {\n        this.$todoLogContainer.$target.classList.add('visible');\n      }\n    });\n    new TodoContainer_TodoContainer('div', this.$target, {\n      class: ['todo-container']\n    });\n    this.$todoLogContainer = new TodoLog_TodoLogContainer('aside', this.$target, {\n      class: ['todo-log-container']\n    });\n  }\n\n}\n\n/* harmony default export */ const app = (App);\n;// CONCATENATED MODULE: ./src/js/index.js\n\n\nnew app(document.querySelector('.app'));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjIzLmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9qcy9jb3JlL0NvbXBvbmVudC5qcz80YTRiIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2pzL2NvbXBvbmVudHMvSGVhZGVyLmpzPzIyODciLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanM/MWE5NCIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL21vY2svbW9jay5qcz8yYjk4Iiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2pzL2NvbXBvbmVudHMvVG9kb0NvbnRhaW5lci9Ub2RvQ29sdW1uL1RvZG9Db2x1bW5IZWFkZXIuanM/ZjE0YSIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9qcy9jb21wb25lbnRzL1RvZG9Db250YWluZXIvVG9kb0NvbHVtbi9Ub2RvQ2FyZC5qcz8yN2Y0Iiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2pzL2NvbXBvbmVudHMvVG9kb0NvbnRhaW5lci9Ub2RvQ29sdW1uL1RvZG9MaXN0LmpzPzQ2YjYiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvZXZlbnRzL3RvZG9EcmFnRXZlbnQuanM/MzNmZSIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9qcy9jb21wb25lbnRzL1RvZG9Db250YWluZXIvVG9kb0NvbHVtbi9Ub2RvQ29sdW1uLmpzP2M4YzAiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvY29tcG9uZW50cy9Ub2RvQ29udGFpbmVyL1RvZG9BZGRGb3JtLmpzP2JjNzYiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvY29tcG9uZW50cy9Ub2RvQ29udGFpbmVyL21vZGFsLmpzPzczZWQiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvYXBpL3RvZG9zLmpzPzhlZmQiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvY29tcG9uZW50cy9Ub2RvQ29udGFpbmVyL1RvZG9Db250YWluZXIuanM/M2VjZSIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9qcy91dGlscy9sb2dUeXBlTWFwLmpzPzUwNGEiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvdXRpbHMvdGltZURpZmYuanM/NjRkYyIsIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9qcy9jb21wb25lbnRzL1RvZG9Mb2cvVG9kb0xvZy5qcz9hZTRlIiwid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2pzL2NvbXBvbmVudHMvVG9kb0xvZy9Ub2RvTG9nQ29udGFpbmVyLmpzP2VmMjEiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvYXBwLmpzPzI0ZDIiLCJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvanMvaW5kZXguanM/MmYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcih0YWcsICRwYXJlbnQpIHtcbiAgICBsZXQgcHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGxldCBiZWZvcmVFbGVtID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAnJztcbiAgICB0aGlzLiR0YXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cbiAgICBpZiAocHJvcHMuY2xhc3MpIHtcbiAgICAgIHRoaXMuJHRhcmdldC5jbGFzc0xpc3QuYWRkKC4uLnByb3BzLmNsYXNzKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuZGF0YXNldCkge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMuZGF0YXNldCkpIHtcbiAgICAgICAgdGhpcy4kdGFyZ2V0LmRhdGFzZXRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5zZXR1cCgpO1xuICAgIHRoaXMuc2V0RXZlbnQoKTsgLy8gY29uc3RydWN0b3Ig7JeQ7IScIOuUsSDtlZzrsojrp4wg7Iuk7ZaJLlxuXG4gICAgdGhpcy5yZW5kZXIoKTtcblxuICAgIGlmICghYmVmb3JlRWxlbSkge1xuICAgICAgJHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLiR0YXJnZXQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGJlZm9yZUVsZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zb2xlLmxvZygkcGFyZW50LnF1ZXJ5U2VsZWN0b3IoYmVmb3JlRWxlbSkpO1xuICAgICAgJHBhcmVudC5pbnNlcnRCZWZvcmUodGhpcy4kdGFyZ2V0LCAkcGFyZW50LnF1ZXJ5U2VsZWN0b3IoYmVmb3JlRWxlbSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkcGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLiR0YXJnZXQsIGJlZm9yZUVsZW0pO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFyQ2hpbGRyZW4oKSB7XG4gICAgdGhpcy4kdGFyZ2V0LmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGUoKTtcbiAgfVxuXG4gIHNldENoaWxkcmVuKCkge31cblxuICBzZXR1cCgpIHt9IC8vIOy7tO2PrOuEjO2KuCDsg53shLEg7IucIOuUsSDtlZzrsojrp4wg7Iuk7ZaJXG5cblxuICBtb3VudGVkKCkge30gLy8gcmVuZGVyIO2bhOyXkCDsi6TtlonrkJjripQg67aA67aEXG5cblxuICB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0gLy8g7Lu07Y+s64SM7Yq4IO2FnO2UjOumv1xuXG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIOugjOuNlOungVxuICAgIHRoaXMuJHRhcmdldC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgdGhpcy5zZXRDaGlsZHJlbigpO1xuICAgIHRoaXMubW91bnRlZCgpOyAvLyByZW5kZXIg7ZuE7JeQIG1vdW50ZWQg6rCAIOyLpO2WieuQnOuLpC5cbiAgfVxuXG4gIHNldEV2ZW50KCkge31cblxuICBzZXRTdGF0ZShuZXdTdGF0ZSkge1xuICAgIC8vIOyDge2DnOuzgOqyveuQmOuptCDrpqzroIzrjZTrp4FcbiAgICB0aGlzLnN0YXRlID0geyAuLi50aGlzLnN0YXRlLFxuICAgICAgLi4ubmV3U3RhdGVcbiAgICB9O1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBhZGRFdmVudChldmVudFR5cGUsIHNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gWy4uLnRoaXMuJHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKV07IC8vIHNlbGVjdG9y7JeQIOuqheyLnO2VnCDqsoMg67O064ukIOuNlCDtlZjsnIQg7JqU7IaM6rCAIOyEoO2DneuQmOuKlCDqsr3smrDqsIAg7J6I7J2EIOuVkFxuICAgIC8vIGNsb3Nlc3Trpbwg7J207Jqp7ZWY7JesIOyymOumrO2VnOuLpC5cblxuICAgIGNvbnN0IGlzVGFyZ2V0ID0gdGFyZ2V0ID0+IGNoaWxkcmVuLmluY2x1ZGVzKHRhcmdldCkgfHwgdGFyZ2V0LmNsb3Nlc3Qoc2VsZWN0b3IpO1xuXG4gICAgdGhpcy4kdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudCA9PiB7XG4gICAgICBpZiAoIWlzVGFyZ2V0KGV2ZW50LnRhcmdldCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGNhbGxiYWNrKGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudDsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4uL2NvcmUvQ29tcG9uZW50JztcblxuY2xhc3MgSGVhZGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgfVxuXG4gIHRlbXBsYXRlKCkge1xuICAgIHJldHVybiBgPGgxPlRPLURPIExJU1Q8L2gxPlxuICAgIDxidXR0b24gY2xhc3M9XCJtZW51XCI+PC9idXR0b24+YDtcbiAgfVxuXG4gIHNldEV2ZW50KCkge1xuICAgIHRoaXMuYWRkRXZlbnQoJ2NsaWNrJywgJy5tZW51JywgdGhpcy5wcm9wcy5vbkNsaWNrKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn0iLCJjb25zdCBwcm9jZXNzZWREYXRhID0ge1xuICAxOiB7XG4gICAgdGl0bGU6ICftlbTslbztlaAg7J28JyxcbiAgICB0b2RvczogW3tcbiAgICAgIGlkOiAnMScsXG4gICAgICB0aXRsZTogJ+y9lOuUqe2VmOq4sCcsXG4gICAgICBjb250ZW50OiAn7L2U65Sp7J2EIOyCrOueke2VtCcsXG4gICAgICBjb2x1bW5faWQ6ICcxJyxcbiAgICAgIGluZGV4OiAnMCdcbiAgICB9LCB7XG4gICAgICBpZDogJzQnLFxuICAgICAgdGl0bGU6ICfsvZTrlKntlZjquLAnLFxuICAgICAgY29udGVudDogJ+y9lOuUqeydhCDsgqzrnpHtlbQnLFxuICAgICAgY29sdW1uX2lkOiAnMScsXG4gICAgICBpbmRleDogJzEnXG4gICAgfSwge1xuICAgICAgaWQ6ICc1JyxcbiAgICAgIHRpdGxlOiAn7Lak7LaU6riwJyxcbiAgICAgIGNvbnRlbnQ6ICftlZjsnbQnLFxuICAgICAgY29sdW1uX2lkOiAnMScsXG4gICAgICBpbmRleDogJzInXG4gICAgfV1cbiAgfSxcbiAgMjoge1xuICAgIHRpdGxlOiAn7KeE7ZaJ7KSR7J24IOydvCcsXG4gICAgdG9kb3M6IFt7XG4gICAgICBpZDogJzInLFxuICAgICAgdGl0bGU6ICfsvZTrlKntlZjquLAnLFxuICAgICAgY29udGVudDogJ+y9lOuUqeydhCDsgqzrnpHtlbQnLFxuICAgICAgY29sdW1uX2lkOiAnMicsXG4gICAgICBpbmRleDogJzAnXG4gICAgfV1cbiAgfSxcbiAgMzoge1xuICAgIHRpdGxlOiAn7JmE66OM65CcIOydvCcsXG4gICAgdG9kb3M6IFt7XG4gICAgICBpZDogJzMnLFxuICAgICAgdGl0bGU6ICfsvZTrlKntlZjquLAnLFxuICAgICAgY29udGVudDogJ+y9lOuUqeydhCDsgqzrnpHtlbQnLFxuICAgICAgY29sdW1uX2lkOiAnMycsXG4gICAgICBpbmRleDogJzAnXG4gICAgfSwge1xuICAgICAgaWQ6ICc2JyxcbiAgICAgIHRpdGxlOiAn7Luk7ZS87IKs6riwJyxcbiAgICAgIGNvbnRlbnQ6ICfrgrTsnbzquYzsp4Ag7ZSE66Gg7Yq4JyxcbiAgICAgIGNvbHVtbl9pZDogJzMnLFxuICAgICAgaW5kZXg6ICcxJ1xuICAgIH1dXG4gIH1cbn07XG5leHBvcnQgY29uc3QgbG9nRGF0YSA9IFt7XG4gIGlkOiAnMScsXG4gIHR5cGU6ICdtb3ZlJyxcbiAgdXNlck5hbWU6ICftlZzsp4Ttg4EnLFxuICB0b0RvVGl0bGU6ICfsvZTrlKntlZjquLAnLFxuICB0b0RvQ29sdW1uSWQ6ICcxJyxcbiAgbmV4dFRvRG9Db2x1bW5JZDogJzInLFxuICBkYXRlOiBuZXcgRGF0ZSgpXG59LCB7XG4gIGlkOiAnMicsXG4gIHR5cGU6ICdyZW1vdmUnLFxuICB1c2VyTmFtZTogJ+ydtOyjvOyVlCcsXG4gIHRvRG9UaXRsZTogJ+uwpeuoueq4sCcsXG4gIHRvRG9Db2x1bW5JZDogJzEnLFxuICBuZXh0VG9Eb0NvbHVtbklkOiBudWxsLFxuICBkYXRlOiBuZXcgRGF0ZSgnMjAyMi0wNy0xMVQwMzoyNDowMCcpXG59LCB7XG4gIGlkOiAnMycsXG4gIHR5cGU6ICdhZGQnLFxuICB1c2VyTmFtZTogJ+2VnOynhO2DgScsXG4gIHRvRG9UaXRsZTogJ+yatOuPme2VmOq4sCcsXG4gIHRvRG9Db2x1bW5JZDogJzEnLFxuICBuZXh0VG9Eb0NvbHVtbklkOiBudWxsLFxuICBkYXRlOiBuZXcgRGF0ZSgpXG59LCB7XG4gIGlkOiAnNCcsXG4gIHR5cGU6ICdtb3ZlJyxcbiAgdXNlck5hbWU6ICfsnbTso7zslZQnLFxuICB0b0RvVGl0bGU6ICfqs7XrtoDtlZjquLAnLFxuICB0b0RvQ29sdW1uSWQ6ICcyJyxcbiAgbmV4dFRvRG9Db2x1bW5JZDogJzEnLFxuICBkYXRlOiBuZXcgRGF0ZSgpXG59LCB7XG4gIGlkOiAnNScsXG4gIHR5cGU6ICdhZGQnLFxuICB1c2VyTmFtZTogJ+2VnOynhO2DgScsXG4gIHRvRG9UaXRsZTogJ+yHvO2Vke2VmOq4sCcsXG4gIHRvRG9Db2x1bW5JZDogJzMnLFxuICBuZXh0VG9Eb0NvbHVtbklkOiBudWxsLFxuICBkYXRlOiBuZXcgRGF0ZSgpXG59XTtcbmV4cG9ydCBkZWZhdWx0IHByb2Nlc3NlZERhdGE7IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL0NvbXBvbmVudCc7XG5cbmNsYXNzIFRvZG9Db2x1bW5IZWFkZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICB9XG5cbiAgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGBcblx0XHQ8ZGl2PlxuXHRcdFx0PGgzPiR7dGhpcy5wcm9wcy50aXRsZX08L2gzPlxuXHRcdFx0PHNwYW4gY2xhc3M9XCJjb3VudFwiPiR7dGhpcy5wcm9wcy5jb3VudH08L3NwYW4+XG5cdFx0PC9kaXY+XG5cdFx0PGRpdj5cblx0XHRcdDxidXR0b24gY2xhc3M9J3RvZG8tYWRkLWJ0bic+PC9idXR0b24+XG5cdFx0XHQ8YnV0dG9uIGNsYXNzPSdjb2x1bW4tcmVtb3ZlLWJ0bic8L2J1dHRvbj5cblx0XHQ8L2Rpdj5cblx0YDtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG9Db2x1bW5IZWFkZXI7IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL0NvbXBvbmVudCc7XG5cbmNsYXNzIFRvZG9DYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgfVxuXG4gIHRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRpdGxlLFxuICAgICAgY29udGVudFxuICAgIH0gPSB0aGlzLnByb3BzLnRvZG87XG4gICAgcmV0dXJuIGBcbiAgICA8aGVhZGVyPlxuICAgICAgPGg0PiR7dGl0bGV9PC9oND5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjYXJkLWNsb3NlLWJ0blwiPjwvYnV0dG9uPlxuICAgIDwvaGVhZGVyPlxuICAgIDxwIGNsYXNzPVwiY2FyZC1jb250ZW50XCI+JHtjb250ZW50fTwvcD5cbiAgICA8cCBjbGFzcz1cImNhcmQtYXV0aG9yXCI+YXV0aG9yIGJ5IHdlYjwvcD5cblx0YDtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG9DYXJkOyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9Db21wb25lbnQnO1xuaW1wb3J0IFRvZG9DYXJkIGZyb20gJy4vVG9kb0NhcmQnO1xuXG5jbGFzcyBUb2RvTGlzdCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gIH1cblxuICBzZXRDaGlsZHJlbigpIHtcbiAgICBjb25zdCB7XG4gICAgICB0b2Rvc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIHRvZG9zLmZvckVhY2godG9kbyA9PiBuZXcgVG9kb0NhcmQoJ2xpJywgdGhpcy4kdGFyZ2V0LCB7XG4gICAgICBjbGFzczogWyd0b2RvLWNhcmQnXSxcbiAgICAgIHRvZG8sXG4gICAgICBkYXRhc2V0OiB7XG4gICAgICAgIHRvZG9JZDogdG9kby5pZCxcbiAgICAgICAgaW5kZXg6IHRvZG8uaW5kZXhcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBUb2RvTGlzdDsiLCJsZXQgZ2hvc3Q7XG5sZXQgc3ViVGFyZ2V0O1xuZXhwb3J0IGZ1bmN0aW9uIG1vdmVBdCh0YXJnZXQsIHBhZ2VYLCBwYWdlWSkge1xuICB0YXJnZXQuc3R5bGUubGVmdCA9IHBhZ2VYIC0gdGFyZ2V0Lm9mZnNldFdpZHRoIC8gMiArICdweCc7XG4gIHRhcmdldC5zdHlsZS50b3AgPSBwYWdlWSAtIHRhcmdldC5vZmZzZXRIZWlnaHQgLyAyICsgJ3B4Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBvbk1vdXNlTW92ZSh0YXJnZXQpIHtcbiAgZ2hvc3QgPSB0YXJnZXQuY2xvbmVOb2RlKHRydWUpO1xuICBnaG9zdC5jbGFzc0xpc3QuYWRkKCdnaG9zdCcpO1xuICBzdWJUYXJnZXQgPSB0YXJnZXQuY2xvbmVOb2RlKHRydWUpO1xuICBzdWJUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWZ0ZXJpbWFnZScsICdzdWJUYXJnZXQnKTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnaG9zdCk7XG4gIGdob3N0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHJldHVybiBldmVudCA9PiB7XG4gICAgdmFyIF9zdWJUYXJnZXQkcHJldmlvdXNFbCwgX3N1YlRhcmdldCRuZXh0RWxlbWVuO1xuXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FmdGVyaW1hZ2UnKTtcbiAgICBnaG9zdC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgZ2hvc3Quc3R5bGUuZGlzcGxheSA9ICdsaXN0LWl0ZW0nO1xuICAgIGdob3N0LnN0eWxlLnpJbmRleCA9IDEwMDA7XG4gICAgZ2hvc3Quc3R5bGUud2lkdGggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLndpZHRoO1xuICAgIGdob3N0LnN0eWxlLnpJbmRleCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuaGVpZ2h0O1xuICAgIG1vdmVBdChnaG9zdCwgZXZlbnQucGFnZVgsIGV2ZW50LnBhZ2VZKTtcbiAgICBsZXQgW2JlbG93Q2FyZCwgdG9kb0xpc3RdID0gZ2V0UG9zaXRpb24oZXZlbnQpO1xuXG4gICAgaWYgKCF0b2RvTGlzdCkge1xuICAgICAgdmFyIF9zdWJUYXJnZXQkcGFyZW50Tm9kZTtcblxuICAgICAgKF9zdWJUYXJnZXQkcGFyZW50Tm9kZSA9IHN1YlRhcmdldC5wYXJlbnROb2RlKSA9PT0gbnVsbCB8fCBfc3ViVGFyZ2V0JHBhcmVudE5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdWJUYXJnZXQkcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdWJUYXJnZXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChiZWxvd0NhcmQgIT09IG51bGwgJiYgYmVsb3dDYXJkICE9PSB2b2lkIDAgJiYgYmVsb3dDYXJkLmNsYXNzTGlzdC5jb250YWlucygnYWZ0ZXJpbWFnZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFiZWxvd0NhcmQpIHtcbiAgICAgIHRvZG9MaXN0LmFwcGVuZENoaWxkKHN1YlRhcmdldCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRyb3BQb2ludElzVXBwZXIoYmVsb3dDYXJkLCBldmVudC5jbGllbnRZKSkge1xuICAgICAgdG9kb0xpc3QuaW5zZXJ0QmVmb3JlKHN1YlRhcmdldCwgYmVsb3dDYXJkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9kb0xpc3QuaW5zZXJ0QmVmb3JlKHN1YlRhcmdldCwgYmVsb3dDYXJkLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgfVxuXG4gICAgaWYgKChfc3ViVGFyZ2V0JHByZXZpb3VzRWwgPSBzdWJUYXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZykgIT09IG51bGwgJiYgX3N1YlRhcmdldCRwcmV2aW91c0VsICE9PSB2b2lkIDAgJiYgX3N1YlRhcmdldCRwcmV2aW91c0VsLmNsYXNzTGlzdC5jb250YWlucygnYWZ0ZXJpbWFnZScpIHx8IChfc3ViVGFyZ2V0JG5leHRFbGVtZW4gPSBzdWJUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKSAhPT0gbnVsbCAmJiBfc3ViVGFyZ2V0JG5leHRFbGVtZW4gIT09IHZvaWQgMCAmJiBfc3ViVGFyZ2V0JG5leHRFbGVtZW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhZnRlcmltYWdlJykpIHtcbiAgICAgIHN1YlRhcmdldC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN1YlRhcmdldCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQb3NpdGlvbihlKSB7XG4gIGxldCBiZWxvd0NhcmQ7XG4gIGdob3N0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGxldCBlbGVtQmVsb3cgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKTtcbiAgZ2hvc3Quc3R5bGUuZGlzcGxheSA9ICdsaXN0LWl0ZW0nO1xuICBsZXQgdG9kb0xpc3QgPSBnZXRUb2RvTGlzdChlbGVtQmVsb3cpO1xuXG4gIGlmICghdG9kb0xpc3QpIHtcbiAgICByZXR1cm4gW2JlbG93Q2FyZCwgdG9kb0xpc3RdO1xuICB9XG5cbiAgaWYgKGVsZW1CZWxvdy5jbG9zZXN0KCcudG9kby1jYXJkJykpIHtcbiAgICBiZWxvd0NhcmQgPSBlbGVtQmVsb3cuY2xvc2VzdCgnLnRvZG8tY2FyZCcpO1xuICB9IGVsc2Uge1xuICAgIGJlbG93Q2FyZCA9IGdldENsb3Nlc3RDYXJkRWxlbWVudCh0b2RvTGlzdC5jaGlsZE5vZGVzLCBlLmNsaWVudFkpO1xuICB9XG5cbiAgcmV0dXJuIFtiZWxvd0NhcmQsIHRvZG9MaXN0XTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vdXNlVXAoZSkge1xuICBsZXQgcHJldkNvbHVtbklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAtMTtcbiAgbGV0IFtiZWxvd0NhcmQsIHRvZG9MaXN0XSA9IGdldFBvc2l0aW9uKGUpO1xuXG4gIGlmICghdG9kb0xpc3QpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGdob3N0KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnaG9zdC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gIGdob3N0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2hvc3QpO1xuICBnaG9zdCA9IG51bGw7XG5cbiAgaWYgKCFzdWJUYXJnZXQucGFyZW50Tm9kZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN1YlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhZnRlcmltYWdlJyk7XG4gIHN1YlRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdzdWJUYXJnZXQnKTtcbiAgY29uc3QgaW5kZXggPSBnZXRJbmRleChzdWJUYXJnZXQsIHByZXZDb2x1bW5JZCk7XG4gIGNvbnN0IG5leHRUb2RvTGlzdCA9IHN1YlRhcmdldC5jbG9zZXN0KCcudG9kby1saXN0Jyk7XG4gIHN1YlRhcmdldC5kYXRhc2V0LmluZGV4ID0gaW5kZXg7XG4gIHN1YlRhcmdldCA9IG51bGw7XG4gIHJldHVybiBbU3RyaW5nKGluZGV4KSwgbmV4dFRvZG9MaXN0XTtcbn1cblxuZnVuY3Rpb24gZ2V0SW5kZXgoc3ViVGFyZ2V0LCBwcmV2Q29sdW1uSWQpIHtcbiAgdmFyIF9zdWJUYXJnZXQkbmV4dEVsZW1lbjI7XG5cbiAgY29uc3QgY3VycmVudENvbHVtbklkID0gc3ViVGFyZ2V0LmNsb3Nlc3QoJy5jb2x1bW4nKS5kYXRhc2V0LmNvbHVtbklkO1xuICBsZXQgcmVzdWx0ID0gKF9zdWJUYXJnZXQkbmV4dEVsZW1lbjIgPSBzdWJUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKSA9PT0gbnVsbCB8fCBfc3ViVGFyZ2V0JG5leHRFbGVtZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ViVGFyZ2V0JG5leHRFbGVtZW4yLmRhdGFzZXQuaW5kZXg7XG5cbiAgaWYgKCFyZXN1bHQpIHtcbiAgICByZXN1bHQgPSBjdXJyZW50Q29sdW1uSWQgPT09IHByZXZDb2x1bW5JZCA/IHN1YlRhcmdldC5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMiA6IHN1YlRhcmdldC5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdldFRvZG9MaXN0KGVsZW1CZWxvdykge1xuICBpZiAoIWVsZW1CZWxvdykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKGVsZW1CZWxvdy5jbG9zZXN0KCcuY29sdW1uIHVsJykpIHtcbiAgICByZXR1cm4gZWxlbUJlbG93LmNsb3Nlc3QoJy5jb2x1bW4gdWwnKTtcbiAgfVxuXG4gIGlmIChlbGVtQmVsb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2x1bW4nKSkge1xuICAgIHJldHVybiBlbGVtQmVsb3cucXVlcnlTZWxlY3RvcigndWwnKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRDbG9zZXN0Q2FyZEVsZW1lbnQodG9kb0xpc3QsIGRyb3BZUG9pbnQpIHtcbiAgY29uc3QgY2xvc2VzdENhcmQgPSB7XG4gICAgb2Zmc2V0OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgZWxlbWVudDogbnVsbFxuICB9O1xuICB0b2RvTGlzdC5mb3JFYWNoKGNhcmQgPT4ge1xuICAgIGNvbnN0IGJveCA9IGNhcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgYm94TWlkWVBvaW50ID0gYm94LnRvcCArIGJveC5oZWlnaHQgLyAyO1xuICAgIGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKGRyb3BZUG9pbnQgLSBib3hNaWRZUG9pbnQpO1xuXG4gICAgaWYgKG9mZnNldCA8IGNsb3Nlc3RDYXJkLm9mZnNldCkge1xuICAgICAgY2xvc2VzdENhcmQub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgY2xvc2VzdENhcmQuZWxlbWVudCA9IGNhcmQ7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGNsb3Nlc3RDYXJkLmVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGRyb3BQb2ludElzVXBwZXIoYmVsb3dDYXJkLCBjdXJyZW50WSkge1xuICBjb25zdCBib3ggPSBiZWxvd0NhcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGJveE1pZFBvaW50ID0gYm94LnRvcCArIGJveC5oZWlnaHQgLyAyO1xuICBjb25zdCBvZmZzZXQgPSBjdXJyZW50WSAtIGJveE1pZFBvaW50O1xuICByZXR1cm4gb2Zmc2V0IDwgMDtcbn0iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvQ29tcG9uZW50JztcbmltcG9ydCBUb2RvQ29sdW1uSGVhZGVyIGZyb20gJy4vVG9kb0NvbHVtbkhlYWRlcic7XG5pbXBvcnQgVG9kb0xpc3QgZnJvbSAnLi9Ub2RvTGlzdCc7XG5pbXBvcnQgeyBtb3VzZVVwLCBvbk1vdXNlTW92ZSB9IGZyb20gJy4uLy4uLy4uL2V2ZW50cy90b2RvRHJhZ0V2ZW50JztcblxuY2xhc3MgVG9kb0NvbHVtbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gIH1cblxuICBzZXRDaGlsZHJlbigpIHtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIHRvZG9zXG4gICAgfSA9IHRoaXMucHJvcHMuY29sdW1uRGF0YTtcbiAgICBuZXcgVG9kb0NvbHVtbkhlYWRlcignaGVhZGVyJywgdGhpcy4kdGFyZ2V0LCB7XG4gICAgICB0aXRsZSxcbiAgICAgIGNvdW50OiB0b2Rvcy5sZW5ndGgsXG4gICAgICBzaG93VG9kb0FkZEZvcm06IHRoaXMucHJvcHMuc2hvd1RvZG9BZGRGb3JtXG4gICAgfSk7XG4gICAgbmV3IFRvZG9MaXN0KCd1bCcsIHRoaXMuJHRhcmdldCwge1xuICAgICAgY2xhc3M6IFsndG9kby1saXN0J10sXG4gICAgICB0b2RvczogdG9kb3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpXG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudCgpIHtcbiAgICB0aGlzLmFkZEV2ZW50KCdtb3VzZW92ZXInLCAnLmNhcmQtY2xvc2UtYnRuJywgZSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRDYXJkID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8tY2FyZCcpO1xuICAgICAgdGFyZ2V0Q2FyZC5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJyk7XG4gICAgfSk7XG4gICAgdGhpcy5hZGRFdmVudCgnbW91c2VvdXQnLCAnLmNhcmQtY2xvc2UtYnRuJywgZSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRDYXJkID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8tY2FyZCcpO1xuICAgICAgdGFyZ2V0Q2FyZC5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJyk7XG4gICAgfSk7XG4gICAgdGhpcy5hZGRFdmVudCgnbW91c2Vkb3duJywgJy5jb2x1bW4nLCBlID0+IHtcbiAgICAgIGlmIChlLmRldGFpbCAhPT0gMSkgcmV0dXJuO1xuICAgICAgY29uc3QgdG9kb0NhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9kby1jYXJkJyk7XG5cbiAgICAgIGlmICghdG9kb0NhcmQgfHwgZS50YXJnZXQudGFnTmFtZSA9PT0gJ0JVVFRPTicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSBvbk1vdXNlTW92ZSh0b2RvQ2FyZCk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGUgPT4ge1xuICAgICAgICB0b2RvQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdhZnRlcmltYWdlJyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgIGNvbnN0IGdob3N0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdob3N0Jyk7XG4gICAgICAgIGNvbnN0IHN1YlRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJUYXJnZXQnKTtcblxuICAgICAgICBpZiAoZ2hvc3QgJiYgc3ViVGFyZ2V0KSB7XG4gICAgICAgICAgY29uc3QgcHJldkNvbHVtbklkID0gdG9kb0NhcmQuY2xvc2VzdCgnLmNvbHVtbicpLmRhdGFzZXQuY29sdW1uSWQ7XG4gICAgICAgICAgY29uc3QgY3VycmVudFRvZG9JZCA9IHRvZG9DYXJkLmRhdGFzZXQudG9kb0lkO1xuICAgICAgICAgIGNvbnN0IERJViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGNvbnN0IFVMID0gdG9kb0NhcmQucGFyZW50Tm9kZTtcbiAgICAgICAgICBjb25zdCBiZWxvd05vZGUgPSBbXTtcbiAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgIERJVi5jbGFzc0xpc3QuYWRkKCdjYXJkLXBvY2tldCcpO1xuICAgICAgICAgIFVMLmluc2VydEJlZm9yZShESVYsIHRvZG9DYXJkLm5leHRFbGVtZW50U2libGluZyk7XG4gICAgICAgICAgdG9kb0NhcmQuY2xhc3NMaXN0LmFkZCgnZmFkZScpO1xuICAgICAgICAgIHRvZG9DYXJkLnBhcmVudE5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0udGFnTmFtZSA9PT0gJ0RJVicpIHJldHVybjtcbiAgICAgICAgICAgIGZsYWcgJiYgYmVsb3dOb2RlLnB1c2goaXRlbSk7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnZmFkZScpKSB7XG4gICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJlbG93Tm9kZS5mb3JFYWNoKG5vZGUgPT4gRElWLmFwcGVuZENoaWxkKG5vZGUpKTtcbiAgICAgICAgICBESVYuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoLSR7dG9kb0NhcmQub2Zmc2V0SGVpZ2h0fXB4KWA7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICAgIGNvbnN0IHhEaWZmID0gZ2hvc3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCAtIHN1YlRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54O1xuICAgICAgICAgIGNvbnN0IHlEaWZmID0gZ2hvc3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSAtIHN1YlRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55O1xuICAgICAgICAgIGdob3N0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt4RGlmZiAqIC0xfXB4LCAke3lEaWZmICogLTF9cHgpYDtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVMaXN0ID0gW107XG4gICAgICAgICAgICBsZXQgaW5kZXg7XG4gICAgICAgICAgICBsZXQgbmV4dFRvZG9MaXN0O1xuICAgICAgICAgICAgRElWLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgbm9kZUxpc3QucHVzaChub2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbm9kZUxpc3QuZm9yRWFjaChub2RlID0+IFVMLmluc2VydEJlZm9yZShub2RlLCBVTC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1wb2NrZXQnKSkpO1xuICAgICAgICAgICAgRElWLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRElWKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgW2luZGV4LCBuZXh0VG9kb0xpc3RdID0gbW91c2VVcChlLCBwcmV2Q29sdW1uSWQpO1xuXG4gICAgICAgICAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV4dFRvZG9MaXN0LmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbm9kZS5kYXRhc2V0LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhc2V0LmluZGV4ID0gU3RyaW5nKE51bWJlcihub2RlLmRhdGFzZXQuaW5kZXgpICsgMSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhc2V0LmluZGV4ID09PSBpbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGV4IC09IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbm9kZS5kYXRhc2V0LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhc2V0LmluZGV4ID0gU3RyaW5nKE51bWJlcihub2RlLmRhdGFzZXQuaW5kZXgpICsgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkRyYWdFbmQodG9kb0NhcmQuZGF0YXNldC50b2RvSWQsIHByZXZDb2x1bW5JZCwgbmV4dFRvZG9MaXN0LmNsb3Nlc3QoJy5jb2x1bW4nKS5kYXRhc2V0LmNvbHVtbklkKTtcbiAgICAgICAgICAgIHRvZG9DYXJkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9kb0NhcmQpO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtb3VzZVVwKGUpWzBdKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJz8/Jyk7XG4gICAgICAgIHRvZG9DYXJkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9kb0NhcmQpO1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG9Db2x1bW47IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudCc7XG5cbmNsYXNzIFRvZG9BZGRGb3JtIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLiR0aXRsZSA9IHRoaXMuJHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuYWRkLWZvcm0tdGl0bGUnKTtcbiAgICB0aGlzLiRjb250ZW50ID0gdGhpcy4kdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZm9ybS1jb250ZW50Jyk7XG4gICAgdGhpcy4kc3VibWl0QnRuID0gdGhpcy4kdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZm9ybS1zdWJtaXQnKTtcbiAgfVxuXG4gIHRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICB0aXRsZTogb3JpZ2luVGl0bGUsXG4gICAgICBjb250ZW50OiBvcmlnaW5Db250ZW50XG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdGl0bGUgPSBvcmlnaW5UaXRsZSA/PyAnJztcbiAgICBjb25zdCBjb250ZW50ID0gb3JpZ2luQ29udGVudCA/PyAnJztcbiAgICBjb25zdCBidG5OYW1lID0gdHlwZSA9PT0gJ2VkaXQnID8gJ+yImOyglScgOiAn65Ox66GdJztcbiAgICByZXR1cm4gYFxuXHRcdFx0XHQ8aW5wdXQgY2xhc3M9J2FkZC1mb3JtLXRpdGxlJyB0eXBlPSd0ZXh0JyBwbGFjZWhvbGRlcj0n7KCc66qp7J2EIOyeheugpe2VmOyEuOyalCcgbmFtZT1cInRpdGxlXCIgdmFsdWU9XCIke3RpdGxlfVwiIC8+XG5cdFx0XHRcdDx0ZXh0YXJlYSBjbGFzcz0nYWRkLWZvcm0tY29udGVudCcgdHlwZT0ndGV4dCcgcGxhY2Vob2xkZXI9J+uCtOyaqeydhCDsnoXroKXtlZjshLjsmpQnIG5hbWU9XCJjb250ZW50XCIgbWF4bGVuZ3RoPVwiNTAwXCI+JHtjb250ZW50fTwvdGV4dGFyZWE+XG5cdFx0XHRcdDxkaXY+XG5cdFx0XHRcdDxidXR0b24gY2xhc3M9J2FkZC1mb3JtLWNhbmNlbCBwcmltYXJ5LWJ0bi0tZ3JheScgdHlwZT0nYnV0dG9uJz7st6jshow8L2J1dHRvbj5cblx0XHRcdFx0PGJ1dHRvbiBjbGFzcz0nYWRkLWZvcm0tc3VibWl0IHByaW1hcnktYnRuLS1ibHVlJyB0eXBlPSdzdWJtaXQnIGRpc2FibGVkPVwidHJ1ZVwiPiR7YnRuTmFtZX08L2J1dHRvbj5cblx0XHRcdFx0IDwvZGl2PlxuXHRcdGA7XG4gIH1cblxuICBzZXRFdmVudCgpIHtcbiAgICBjb25zdCBpc0Rpc2FibGVkID0gX3JlZiA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBvcmlnaW5UaXRsZSxcbiAgICAgICAgb3JpZ2luQ29udGVudCxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGNvbnRlbnRcbiAgICAgIH0gPSBfcmVmO1xuICAgICAgaWYgKCF0aXRsZSB8fCAhY29udGVudCkgcmV0dXJuIHRydWU7ZWxzZSBpZiAob3JpZ2luVGl0bGUgPT09IHRpdGxlICYmIG9yaWdpbkNvbnRlbnQgPT09IGNvbnRlbnQpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmFkZEV2ZW50KCdpbnB1dCcsICcuYWRkLWZvcm0tY29udGVudCcsIGUgPT4ge1xuICAgICAgZS50YXJnZXQuc3R5bGUuaGVpZ2h0ID0gJzE2cHgnO1xuICAgICAgZS50YXJnZXQuc3R5bGUuaGVpZ2h0ID0gZS50YXJnZXQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICB9KTtcbiAgICBbJ2lucHV0JywgJ3RleHRhcmVhJ10uZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgIHRoaXMuYWRkRXZlbnQoJ2lucHV0JywgdHlwZSwgKCkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgdGl0bGU6IG9yaWdpblRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IG9yaWdpbkNvbnRlbnRcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IFt0aXRsZSwgY29udGVudF0gPSBbdGhpcy4kdGl0bGUudmFsdWUudHJpbSgpLCB0aGlzLiRjb250ZW50LnZhbHVlLnRyaW0oKV07XG5cbiAgICAgICAgaWYgKGlzRGlzYWJsZWQoe1xuICAgICAgICAgIG9yaWdpblRpdGxlLFxuICAgICAgICAgIG9yaWdpbkNvbnRlbnQsXG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgY29udGVudFxuICAgICAgICB9KSkge1xuICAgICAgICAgIHRoaXMuJHN1Ym1pdEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy4kdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Jsb2NrZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRzdWJtaXRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLiR0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmxvY2tlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG9BZGRGb3JtOyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9Db21wb25lbnQnO1xuXG5jbGFzcyBNb2RhbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gIH1cblxuICB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsXCI+XG4gICAgICAgICAgICAgICAgPHA+7ISg7YOd7ZWcIOy5tOuTnOulvCDsgq3soJztlaDquYzsmpQ/PC9wPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbC1jYW5jZWwtYnRuIHByaW1hcnktYnRuLS1ncmF5XCI+7Leo7IaMPC9idXR0b24+IFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWwtcmVtb3ZlLWJ0biBwcmltYXJ5LWJ0bi0tYmx1ZVwiPuyCreygnDwvYnV0dG9uPiBcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICB9XG5cbiAgc2V0RXZlbnQoKSB7XG4gICAgdGhpcy5hZGRFdmVudCgnY2xpY2snLCAnLm1vZGFsLWNhbmNlbC1idG4nLCB0aGlzLnByb3BzLmNsb3NlTW9kYWwpO1xuICAgIHRoaXMuYWRkRXZlbnQoJ2NsaWNrJywgJy5tb2RhbC1yZW1vdmUtYnRuJywgdGhpcy5wcm9wcy5yZW1vdmVDYXJkKTtcbiAgICB0aGlzLmFkZEV2ZW50KCdjbGljaycsICcubW9kYWwtY29udGFpbmVyJywgZSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbC1jb250YWluZXInKSkgdGhpcy5wcm9wcy5jbG9zZU1vZGFsKCk7XG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RhbDsiLCJleHBvcnQgZnVuY3Rpb24gYWRkVG9kbygpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiByZXMoOTApKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlZGl0VG9kbyh0b2RvSWQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiByZXModG9kb0lkKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVG9kbyh0b2RvSWQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiByZXModG9kb0lkKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVG9kbygpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiByZXMoMTIzKSk7XG59IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IENvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudCc7XG5pbXBvcnQgcHJvY2Vzc2VkRGF0YSBmcm9tICcuLi8uLi8uLi8uLi9tb2NrL21vY2snO1xuaW1wb3J0IFRvZG9Db2x1bW4gZnJvbSAnLi9Ub2RvQ29sdW1uL1RvZG9Db2x1bW4nO1xuaW1wb3J0IFRvZG9BZGRGb3JtIGZyb20gJy4vVG9kb0FkZEZvcm0nO1xuaW1wb3J0IFRvZG9DYXJkIGZyb20gJy4vVG9kb0NvbHVtbi9Ub2RvQ2FyZCc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9tb2RhbCc7XG5pbXBvcnQgeyBhZGRUb2RvLCBlZGl0VG9kbywgcmVtb3ZlVG9kbywgdXBkYXRlVG9kbyB9IGZyb20gJy4uLy4uL2FwaS90b2Rvcyc7XG5cbmNsYXNzIFRvZG9Db250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic2V0RHJhZ0FuZERyb3BTdGF0ZVwiLCAodG9kb0lkLCBwcmV2Q29sdW1uSWQsIG5leHRDb2x1bW5JZCkgPT4ge1xuICAgICAgdXBkYXRlVG9kbygpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zdCB0b2RvSW5kZXggPSB0aGlzLnN0YXRlLmNvbHVtbkRhdGFbcHJldkNvbHVtbklkXS50b2Rvcy5maW5kSW5kZXgodG9kbyA9PiB0b2RvLmlkID09PSB0b2RvSWQpO1xuICAgICAgICBjb25zdCB0b2RvID0gdGhpcy5zdGF0ZS5jb2x1bW5EYXRhW3ByZXZDb2x1bW5JZF0udG9kb3NbdG9kb0luZGV4XTtcbiAgICAgICAgY29uc3QgcHJldkNvbHVtbiA9IHRoaXMuc3RhdGUuY29sdW1uRGF0YVtwcmV2Q29sdW1uSWRdLnRvZG9zLmZpbHRlcih0b2RvID0+IHtcbiAgICAgICAgICByZXR1cm4gdG9kby5pZCAhPT0gdG9kb0lkO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV4dENvbHVtbiA9IHRoaXMuc3RhdGUuY29sdW1uRGF0YVtuZXh0Q29sdW1uSWRdLnRvZG9zLnB1c2godG9kbyk7XG4gICAgICAgIHRoaXMuc3RhdGUuY29sdW1uRGF0YVtwcmV2Q29sdW1uSWRdLnRvZG9zID0gcHJldkNvbHVtbjtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IC4uLnRoaXMuc3RhdGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNyZWF0ZVRvZG9DYXJkXCIsIF9yZWYgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgJHBhcmVudCxcbiAgICAgICAgcHJvcHMgPSB7fSxcbiAgICAgICAgJGJlZm9yZUVsZW1lbnRcbiAgICAgIH0gPSBfcmVmO1xuICAgICAgY29uc3QgY2xhc3NMaXN0ID0gWy4uLihwcm9wcy5jbGFzcyB8fCBbXSksICd0b2RvLWNhcmQnXTtcbiAgICAgIGNvbnN0IHRvZG9JZCA9IHByb3BzLnRvZG9JZDtcbiAgICAgIGNvbnN0IGluZGV4ID0gcHJvcHMuaW5kZXg7XG5cbiAgICAgIGlmICh0b2RvSWQpIHtcbiAgICAgICAgLy8gdG9kb0lk6rCAIOyeiOydhCDrlYxcbiAgICAgICAgLy8gZWRpdFxuICAgICAgICBlZGl0VG9kbygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGVsZW0gPSBuZXcgVG9kb0NhcmQoJ2xpJywgJHBhcmVudCwgeyAuLi5wcm9wcyxcbiAgICAgICAgICAgIGNsYXNzOiBjbGFzc0xpc3QsXG4gICAgICAgICAgICBkYXRhc2V0OiB7XG4gICAgICAgICAgICAgIHRvZG9JZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sICRiZWZvcmVFbGVtZW50KTtcbiAgICAgICAgICBjb25zdCBjb2x1bW5JZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRvZG8taWQ9JyR7dG9kb0lkfSddYCkuY2xvc2VzdCgnLmNvbHVtbicpLmRhdGFzZXQuY29sdW1uSWQ7XG4gICAgICAgICAgY29uc3QgdG9kbyA9IHtcbiAgICAgICAgICAgIGlkOiB0b2RvSWQsXG4gICAgICAgICAgICB0aXRsZTogcHJvcHMudG9kby50aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb3BzLnRvZG8uY29udGVudCxcbiAgICAgICAgICAgIGNvbHVtbklkLFxuICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICB9O1xuICAgICAgICAgIGxldCB0YXJnZXQgPSB0aGlzLnN0YXRlLmNvbHVtbkRhdGFbY29sdW1uSWRdLnRvZG9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT0gdG9kb0lkKTtcbiAgICAgICAgICB0aGlzLnN0YXRlLmNvbHVtbkRhdGFbY29sdW1uSWRdLnRvZG9zW3RhcmdldF0gPSB7IC4uLnRvZG9cbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyAuLi50aGlzLnN0YXRlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVQcmV2Q2FyZCgpO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWRkRm9ybSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRvZG9JZOqwgCDsl4bsnYQg65WMXG4gICAgICAgIC8vIGFkZFxuICAgICAgICBhZGRUb2RvKCkudGhlbihpZCA9PiB7XG4gICAgICAgICAgbmV3IFRvZG9DYXJkKCdsaScsICRwYXJlbnQsIHsgLi4ucHJvcHMsXG4gICAgICAgICAgICBjbGFzczogY2xhc3NMaXN0LFxuICAgICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgICB0b2RvSWQ6IGlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgJGJlZm9yZUVsZW1lbnQpO1xuICAgICAgICAgIGNvbnN0IGNvbHVtbklkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdG9kby1pZD0nJHtpZH0nXWApLmNsb3Nlc3QoJy5jb2x1bW4nKS5kYXRhc2V0LmNvbHVtbklkO1xuICAgICAgICAgIGNvbnN0IHRvZG8gPSB7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICB0aXRsZTogcHJvcHMudG9kby50aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb3BzLnRvZG8uY29udGVudCxcbiAgICAgICAgICAgIGNvbHVtbklkLFxuICAgICAgICAgICAgaW5kZXg6IHRoaXMuc3RhdGUuY29sdW1uRGF0YVtjb2x1bW5JZF0udG9kb3MubGVuZ3RoXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLnN0YXRlLmNvbHVtbkRhdGFbY29sdW1uSWRdLnRvZG9zLnB1c2godG9kbyk7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IC4uLnRoaXMuc3RhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnJlbW92ZVByZXZDYXJkKCk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBZGRGb3JtKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9kb0NhcmRcIiwge1xuICAgICAgZWRpdFN0YXJ0OiB0aGlzLmNyZWF0ZUFkZEZvcm0sXG4gICAgICBhZGRTdGFydDogdGhpcy5jcmVhdGVBZGRGb3JtLFxuICAgICAgY29uZmlybUVkaXRUb2RvOiB0aGlzLmNyZWF0ZVRvZG9DYXJkLFxuICAgICAgY29uZmlybUFkZFRvZG86IHRoaXMuY3JlYXRlVG9kb0NhcmRcbiAgICB9KTtcblxuICAgIHRoaXMuY29sdW1ucyA9IHt9O1xuICAgIHRoaXMuYWRkRm9ybSA9IG51bGw7XG4gICAgdGhpcy5wcmV2Q2FyZCA9IG51bGw7XG4gIH1cblxuICBzZXR1cCgpIHtcbiAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUocHJvY2Vzc2VkRGF0YSkpLnRoZW4ocmVzID0+IHtcbiAgICAgIGNvbnN0IGNvbHVtbkRhdGEgPSB7fTtcbiAgICAgIE9iamVjdC5rZXlzKHJlcykuZm9yRWFjaChrZXkgPT4gY29sdW1uRGF0YVtrZXldID0geyAuLi5yZXNba2V5XVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29sdW1uRGF0YVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRDaGlsZHJlbigpIHtcbiAgICB0aGlzLmNsZWFyQ2hpbGRyZW4oKTtcbiAgICB0aGlzLmNvbHVtbnMgPSB7fTtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5jb2x1bW5EYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5zdGF0ZS5jb2x1bW5EYXRhKSB7XG4gICAgICB0aGlzLmNvbHVtbnNba2V5XSA9IG5ldyBUb2RvQ29sdW1uKCdkaXYnLCB0aGlzLiR0YXJnZXQsIHtcbiAgICAgICAgY2xhc3M6IFsnY29sdW1uJ10sXG4gICAgICAgIGRhdGFzZXQ6IHtcbiAgICAgICAgICBjb2x1bW5JZDoga2V5XG4gICAgICAgIH0sXG4gICAgICAgIGNvbHVtbkRhdGE6IHRoaXMuc3RhdGUuY29sdW1uRGF0YVtrZXldLFxuICAgICAgICBvbkRyYWdFbmQ6IHRoaXMuc2V0RHJhZ0FuZERyb3BTdGF0ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnQoKSB7XG4gICAgdGhpcy5hZGRFdmVudCgnY2xpY2snLCAnLmNvbHVtbicsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgJGNvbHVtbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jb2x1bW4nKTtcbiAgICAgIGNvbnN0ICRjbGlja2VkVGFyZ2V0ID0gZS50YXJnZXQ7XG5cbiAgICAgIGlmICgkY2xpY2tlZFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZG8tYWRkLWJ0bicpKSB7XG4gICAgICAgIHRoaXMuYWRkU3RhcnQoJGNvbHVtbik7XG4gICAgICB9IGVsc2UgaWYgKCRjbGlja2VkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWRkLWZvcm0tY2FuY2VsJykpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxBZGRUb2RvKCk7XG4gICAgICB9IGVsc2UgaWYgKCRjbGlja2VkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWRkLWZvcm0tc3VibWl0JykpIHtcbiAgICAgICAgdGhpcy5jb25maXJtQWRkVG9kbygkY2xpY2tlZFRhcmdldCk7XG4gICAgICB9IGVsc2UgaWYgKCRjbGlja2VkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FyZC1jbG9zZS1idG4nKSkge1xuICAgICAgICBjb25zdCAkdG9kb0NhcmQgPSAkY2xpY2tlZFRhcmdldC5jbG9zZXN0KCcudG9kby1jYXJkJyk7XG4gICAgICAgIHRoaXMubW9kYWwgPyB0aGlzLmNsb3NlTW9kYWwoKSA6IHRoaXMub3Blbk1vZGFsKCR0b2RvQ2FyZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5hZGRFdmVudCgnZGJsY2xpY2snLCAnLnRvZG8tY2FyZCcsIGUgPT4ge1xuICAgICAgY29uc3QgJHRvZG9DYXJkID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8tY2FyZCcpO1xuICAgICAgdGhpcy5lZGl0U3RhcnQoJHRvZG9DYXJkKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZFN0YXJ0KCRjb2x1bW4pIHtcbiAgICBjb25zdCAkcGFyZW50ID0gJGNvbHVtbi5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0Jyk7XG4gICAgY29uc3QgJGJlZm9yZUVsZW1lbnQgPSAkcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsID4gbGk6Zmlyc3QtY2hpbGQnKTtcbiAgICBsZXQgJG5ld0FkZEZvcm0gPSBudWxsOyAvLyDtlbTri7kg7Lus65+87J20IGFkZC1mb3JtIOydtCDslYTri4wg6rK97JqwIO2VtOuLuSDsu6zrn7zsl5AgYWRkLWZvcm0g7IOd7ISxXG5cbiAgICBpZiAoKCRiZWZvcmVFbGVtZW50ID09PSBudWxsIHx8ICRiZWZvcmVFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAkYmVmb3JlRWxlbWVudC5kYXRhc2V0LnR5cGUpICE9PSAnYWRkJykge1xuICAgICAgJG5ld0FkZEZvcm0gPSB0aGlzLmhhbmRsZVRvZG9DYXJkWydhZGRTdGFydCddKHtcbiAgICAgICAgJHBhcmVudCxcbiAgICAgICAgJGJlZm9yZUVsZW1lbnQsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgdHlwZTogJ2FkZCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyDquLDsobTsl5Ag7Je066Ck7J6I642YIGFkZEZvcm0g64ur6riwXG5cbiAgICAgIHRoaXMucmVtb3ZlQWRkRm9ybSgkbmV3QWRkRm9ybSk7XG4gICAgICB0aGlzLnByZXZDYXJkICYmIHRoaXMuaGFuZGxlUHJldkNhcmQoKTtcbiAgICB9IC8vIO2VtOuLuSDsu6zrn7zsnbQgYWRkLWZvcm0g7J207JeI642YIOqyveyasFxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBZGRGb3JtKCk7XG4gICAgfVxuICB9XG5cbiAgY2FuY2VsQWRkVG9kbygpIHtcbiAgICB0aGlzLnJlbW92ZUFkZEZvcm0oKTtcbiAgICB0aGlzLmhhbmRsZVByZXZDYXJkKCk7XG4gIH1cblxuICBjb25maXJtQWRkVG9kbygkYWRkRm9ybVN1Ym1pdEJ0bikge1xuICAgIGNvbnN0ICR0b2RvQWRkRm9ybSA9ICRhZGRGb3JtU3VibWl0QnRuLmNsb3Nlc3QoJy50b2RvLWFkZC1mb3JtJyk7XG4gICAgY29uc3QgdG9kbyA9IHtcbiAgICAgIHRpdGxlOiAkdG9kb0FkZEZvcm0ucXVlcnlTZWxlY3RvcignLmFkZC1mb3JtLXRpdGxlJykudmFsdWUsXG4gICAgICBjb250ZW50OiAkdG9kb0FkZEZvcm0ucXVlcnlTZWxlY3RvcignLmFkZC1mb3JtLWNvbnRlbnQnKS52YWx1ZVxuICAgIH07XG4gICAgY29uc3QgJHBhcmVudCA9ICR0b2RvQWRkRm9ybS5wYXJlbnROb2RlO1xuICAgIHRoaXMuaGFuZGxlVG9kb0NhcmRbJ2NvbmZpcm1BZGRUb2RvJ10oe1xuICAgICAgJHBhcmVudCxcbiAgICAgICRiZWZvcmVFbGVtZW50OiAkdG9kb0FkZEZvcm0sXG4gICAgICBwcm9wczoge1xuICAgICAgICB0b2RvLFxuICAgICAgICB0b2RvSWQ6ICR0b2RvQWRkRm9ybS5kYXRhc2V0LnRvZG9JZCxcbiAgICAgICAgaW5kZXg6ICR0b2RvQWRkRm9ybS5kYXRhc2V0LnRvZG9JZFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZWRpdFN0YXJ0KCRiZWZvcmVFbGVtZW50KSB7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICB0eXBlOiAnZWRpdCcsXG4gICAgICB0aXRsZTogJGJlZm9yZUVsZW1lbnQucXVlcnlTZWxlY3RvcignaDQnKS5pbm5lclRleHQsXG4gICAgICBjb250ZW50OiAkYmVmb3JlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JykuaW5uZXJUZXh0LFxuICAgICAgZGF0YXNldDoge1xuICAgICAgICB0b2RvSWQ6ICRiZWZvcmVFbGVtZW50LmRhdGFzZXQudG9kb0lkLFxuICAgICAgICBpbmRleDogJGJlZm9yZUVsZW1lbnQuZGF0YXNldC5pbmRleCxcbiAgICAgICAgdHlwZTogJ2VkaXQnXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCAkcGFyZW50ID0gJGJlZm9yZUVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICBjb25zdCAkbmV3QWRkRm9ybSA9IHRoaXMuaGFuZGxlVG9kb0NhcmRbJ2VkaXRTdGFydCddKHtcbiAgICAgICRwYXJlbnQsXG4gICAgICAkYmVmb3JlRWxlbWVudCxcbiAgICAgIHByb3BzXG4gICAgfSk7XG4gICAgdGhpcy5yZW1vdmVBZGRGb3JtKCRuZXdBZGRGb3JtKTtcbiAgICB0aGlzLmhhbmRsZVByZXZDYXJkKCRiZWZvcmVFbGVtZW50KTtcbiAgfVxuXG4gIHJlbW92ZUFkZEZvcm0oJG5ld0FkZEZvcm0pIHtcbiAgICB2YXIgX3RoaXMkYWRkRm9ybSwgX3RoaXMkYWRkRm9ybTI7XG5cbiAgICAoX3RoaXMkYWRkRm9ybSA9IHRoaXMuYWRkRm9ybSkgPT09IG51bGwgfHwgX3RoaXMkYWRkRm9ybSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWRkRm9ybS4kdGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoKF90aGlzJGFkZEZvcm0yID0gdGhpcy5hZGRGb3JtKSA9PT0gbnVsbCB8fCBfdGhpcyRhZGRGb3JtMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkYWRkRm9ybTIuJHRhcmdldCk7XG4gICAgdGhpcy5hZGRGb3JtID0gJG5ld0FkZEZvcm07XG4gIH1cblxuICBoYW5kbGVQcmV2Q2FyZCgkbmV3UHJldkNhcmQpIHtcbiAgICBpZiAodGhpcy5wcmV2Q2FyZCkge1xuICAgICAgdGhpcy5wcmV2Q2FyZC5zdHlsZS5kaXNwbGF5ID0gJ2xpc3QtaXRlbSc7XG4gICAgfVxuXG4gICAgdGhpcy5wcmV2Q2FyZCA9ICRuZXdQcmV2Q2FyZDtcbiAgICB0aGlzLnByZXZDYXJkICYmICh0aGlzLnByZXZDYXJkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpO1xuICB9XG5cbiAgcmVtb3ZlUHJldkNhcmQoKSB7XG4gICAgdGhpcy5wcmV2Q2FyZCAmJiB0aGlzLnByZXZDYXJkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wcmV2Q2FyZCk7XG4gICAgdGhpcy5wcmV2Q2FyZCA9IG51bGw7XG4gIH1cblxuICBjcmVhdGVBZGRGb3JtKF9yZWYyKSB7XG4gICAgbGV0IHtcbiAgICAgICRwYXJlbnQsXG4gICAgICBwcm9wcyA9IHt9LFxuICAgICAgJGJlZm9yZUVsZW1lbnRcbiAgICB9ID0gX3JlZjI7XG4gICAgY29uc3QgY2xhc3NMaXN0ID0gWy4uLihwcm9wcy5jbGFzcyB8fCBbXSksICd0b2RvLWFkZC1mb3JtJ107XG4gICAgcmV0dXJuIG5ldyBUb2RvQWRkRm9ybSgnbGknLCAkcGFyZW50LCB7IC4uLnByb3BzLFxuICAgICAgY2xhc3M6IFsuLi5jbGFzc0xpc3QsICdibG9ja2VkJ11cbiAgICB9LCAkYmVmb3JlRWxlbWVudCk7XG4gIH1cblxuICBvcGVuTW9kYWwoJHRvZG9DYXJkKSB7XG4gICAgY29uc3QgcmVtb3ZlQ2FyZCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbHVtbklkID0gJHRvZG9DYXJkLmNsb3Nlc3QoJy5jb2x1bW4nKS5kYXRhc2V0LmNvbHVtbklkO1xuICAgICAgY29uc3QgdG9kb0lkID0gJHRvZG9DYXJkLmRhdGFzZXQudG9kb0lkO1xuICAgICAgcmVtb3ZlVG9kbyh0b2RvSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5zdGF0ZS5jb2x1bW5EYXRhW2NvbHVtbklkXS50b2RvcyA9IHRoaXMuc3RhdGUuY29sdW1uRGF0YVtjb2x1bW5JZF0udG9kb3MuZmlsdGVyKHRvZG8gPT4ge1xuICAgICAgICAgIGlmICh0b2RvLmlkID09PSB0b2RvSWQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdG9kby5pbmRleDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdG9kby5pZCAhPT0gdG9kb0lkO1xuICAgICAgICB9KS5tYXAodG9kbyA9PiB7XG4gICAgICAgICAgaWYgKGluZGV4IDwgdG9kby5pbmRleCkge1xuICAgICAgICAgICAgdG9kby5pbmRleCAtPSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0b2RvO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IC4uLnRoaXMuc3RhdGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICAgIH07XG5cbiAgICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCdkaXYnLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JyksIHtcbiAgICAgIGNsYXNzOiBbJ21vZGFsLWNvbnRhaW5lciddLFxuICAgICAgcmVtb3ZlQ2FyZCxcbiAgICAgIGNsb3NlTW9kYWw6IHRoaXMuY2xvc2VNb2RhbC5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH1cblxuICBjbG9zZU1vZGFsKCkge1xuICAgIGNvbnN0ICRtb2RhbCA9IHRoaXMubW9kYWwuJHRhcmdldDtcbiAgICAkbW9kYWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCgkbW9kYWwpO1xuICAgIHRoaXMubW9kYWwgPSBudWxsO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9kb0NvbnRhaW5lcjsiLCJmdW5jdGlvbiBtb3ZlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICB0b2RvVGl0bGUsXG4gICAgdG9kb0NvbHVtbixcbiAgICBuZXh0VG9kb0NvbHVtblxuICB9ID0gX3JlZjtcbiAgcmV0dXJuIGAke3RvZG9UaXRsZX3snYQv66W8ICR7dG9kb0NvbHVtbn3sl5DshJwgJHtuZXh0VG9kb0NvbHVtbn3snLzroZwg7J2064+Z7ZWY7JiA7Iq164uI64ukLmA7XG59XG5cbmZ1bmN0aW9uIGFkZChfcmVmMikge1xuICBsZXQge1xuICAgIHRvZG9UaXRsZSxcbiAgICB0b2RvQ29sdW1uXG4gIH0gPSBfcmVmMjtcbiAgcmV0dXJuIGAke3RvZG9Db2x1bW597JeQICR7dG9kb1RpdGxlfeydhC/rpbwg65Ox66Gd7ZWY7JiA7Iq164uI64ukLmA7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZShfcmVmMykge1xuICBsZXQge1xuICAgIHRvZG9UaXRsZSxcbiAgICB0b2RvQ29sdW1uXG4gIH0gPSBfcmVmMztcbiAgcmV0dXJuIGAke3RvZG9Db2x1bW597JeQ7IScICR7dG9kb1RpdGxlfeydhC/rpbwg7IKt7KCc7ZWY7JiA7Iq164uI64ukLmA7XG59XG5cbmNvbnN0IGxvZ0RhdGEyRGVzYyA9IHtcbiAgbW92ZTogbW92ZSxcbiAgYWRkOiBhZGQsXG4gIHJlbW92ZTogcmVtb3ZlXG59O1xuZXhwb3J0IGRlZmF1bHQgbG9nRGF0YTJEZXNjOyIsImZ1bmN0aW9uIHRpbWVEaWZmKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBkYXRlOiBjcmVhdGVkQXRcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IG1pbGxpU2Vjb25kcyA9IG5ldyBEYXRlKCkgLSBjcmVhdGVkQXQ7XG4gIGNvbnN0IHNlY29uZHMgPSBtaWxsaVNlY29uZHMgLyAxMDAwO1xuICBpZiAoc2Vjb25kcyA8IDYwKSByZXR1cm4gYOuwqeq4iCDsoIRgO1xuICBjb25zdCBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xuICBpZiAobWludXRlcyA8IDYwKSByZXR1cm4gYCR7TWF0aC5mbG9vcihtaW51dGVzKX3rtoQg7KCEYDtcbiAgY29uc3QgaG91cnMgPSBtaW51dGVzIC8gNjA7XG4gIGlmIChob3VycyA8IDI0KSByZXR1cm4gYCR7TWF0aC5mbG9vcihob3Vycyl97Iuc6rCEIOyghGA7XG4gIGNvbnN0IGRheXMgPSBob3VycyAvIDI0O1xuICBpZiAoZGF5cyA8IDcpIHJldHVybiBgJHtNYXRoLmZsb29yKGRheXMpfeydvCDsoIRgO1xuICBjb25zdCB3ZWVrcyA9IGRheXMgLyA3O1xuICBpZiAod2Vla3MgPCA1KSByZXR1cm4gYCR7TWF0aC5mbG9vcih3ZWVrcyl97KO8IOyghGA7XG4gIGNvbnN0IG1vbnRocyA9IGRheXMgLyAzMDtcbiAgaWYgKG1vbnRocyA8IDEyKSByZXR1cm4gYCR7TWF0aC5mbG9vcihtb250aHMpfeqwnOyblCDsoIRgO1xuICBjb25zdCB5ZWFycyA9IGRheXMgLyAzNjU7XG4gIHJldHVybiBgJHtNYXRoLmZsb29yKHllYXJzKX3rhYQg7KCEYDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdGltZURpZmY7IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL0NvbXBvbmVudCc7XG5pbXBvcnQgbG9nRGF0YTJEZXNjIGZyb20gJy4uLy4uL3V0aWxzL2xvZ1R5cGVNYXAnO1xuaW1wb3J0IHRpbWVEaWZmIGZyb20gJy4uLy4uL3V0aWxzL3RpbWVEaWZmJztcbmltcG9ydCBhdmF0YXIgZnJvbSAnLi4vLi4vLi4vYXNzZXRzL3VzZXJfYXZhdGFyX2ltZy5zdmcnO1xuXG5jbGFzcyBUb2RvTG9nIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgfVxuXG4gIHRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICBkYXRlXG4gICAgfSA9IHRoaXMucHJvcHMubG9nRGF0YTtcbiAgICByZXR1cm4gYDxpbWcgc3JjPVwiJHthdmF0YXJ9XCIgYWx0PVwiQXZhdGFydFwiIC8+XG4gICAgPGRpdiBjbGFzcz1cImxvZ19fY29udGVudFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInVzZXJcIj5Ac2FtPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibG9nLWNvbnRlbnRcIj5cbiAgICAgIFx0JHtsb2dEYXRhMkRlc2NbdHlwZV0odGhpcy5wcm9wcy5sb2dEYXRhKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRpbWVcIj4ke3RpbWVEaWZmKHtcbiAgICAgIGRhdGVcbiAgICB9KX08L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9kb0xvZzsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvQ29tcG9uZW50JztcbmltcG9ydCBUb2RvTG9nIGZyb20gJy4vVG9kb0xvZyc7XG5pbXBvcnQgeyBsb2dEYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vbW9jay9tb2NrJztcblxuY2xhc3MgVG9kb0xvZ0NvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gIH1cblxuICBzZXR1cCgpIHtcbiAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUobG9nRGF0YSkpLnRoZW4ocmVzID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsb2dEYXRhOiByZXNcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGA8aGVhZGVyPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImxvZy1jbG9zZS1idG5cIj48L2J1dHRvbj5cblx0XHRcdDwvaGVhZGVyPlxuXHRcdFx0PHVsIGNsYXNzPVwibG9nLWxpc3RcIj48L3VsPlxuXHRcdFx0YDtcbiAgfVxuXG4gIHNldENoaWxkcmVuKCkge1xuICAgIHRoaXMuY2xlYXJDaGlsZHJlbigpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUubG9nRGF0YSk7XG4gICAgdGhpcy5zdGF0ZS5sb2dEYXRhICYmIHRoaXMuc3RhdGUubG9nRGF0YS5mb3JFYWNoKGl0ZW0gPT4gbmV3IFRvZG9Mb2coJ2xpJywgdGhpcy4kdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5sb2ctbGlzdCcpLCB7XG4gICAgICBsb2dEYXRhOiBpdGVtXG4gICAgfSkpO1xuICB9XG5cbiAgc2V0RXZlbnQoKSB7XG4gICAgdGhpcy5hZGRFdmVudCgnY2xpY2snLCAnLmxvZy1jbG9zZS1idG4nLCAoKSA9PiB0aGlzLiR0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG9Mb2dDb250YWluZXI7IiwiaW1wb3J0IEhlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvSGVhZGVyJztcbmltcG9ydCBUb2RvQ29udGFpbmVyIGZyb20gJy4vY29tcG9uZW50cy9Ub2RvQ29udGFpbmVyL1RvZG9Db250YWluZXInO1xuaW1wb3J0IFRvZG9Mb2dDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL1RvZG9Mb2cvVG9kb0xvZ0NvbnRhaW5lcic7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCR0YXJnZXQpIHtcbiAgICB0aGlzLiR0YXJnZXQgPSAkdGFyZ2V0O1xuICAgIHRoaXMuJHRvZG9Mb2dDb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuc2V0dXAoKTtcbiAgfVxuXG4gIHNldHVwKCkge1xuICAgIG5ldyBIZWFkZXIoJ2hlYWRlcicsIHRoaXMuJHRhcmdldCwge1xuICAgICAgY2xhc3M6IFsnaGVhZGVyJywgJ2hpJ10sXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuJHRvZG9Mb2dDb250YWluZXIuJHRhcmdldC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbmV3IFRvZG9Db250YWluZXIoJ2RpdicsIHRoaXMuJHRhcmdldCwge1xuICAgICAgY2xhc3M6IFsndG9kby1jb250YWluZXInXVxuICAgIH0pO1xuICAgIHRoaXMuJHRvZG9Mb2dDb250YWluZXIgPSBuZXcgVG9kb0xvZ0NvbnRhaW5lcignYXNpZGUnLCB0aGlzLiR0YXJnZXQsIHtcbiAgICAgIGNsYXNzOiBbJ3RvZG8tbG9nLWNvbnRhaW5lciddXG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHA7IiwiaW1wb3J0IGNzcyBmcm9tICcuLi9zdHlsZXMvc3R5bGUuc2Nzcyc7XG5pbXBvcnQgQXBwIGZyb20gJy4vYXBwJztcbm5ldyBBcHAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcCcpKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///623\n")}},__webpack_require__={};__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),(()=>{var n;__webpack_require__.g.importScripts&&(n=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!n&&t&&(t.currentScript&&(n=t.currentScript.src),!n)){var g=t.getElementsByTagName("script");g.length&&(n=g[g.length-1].src)}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=n})();var __webpack_exports__={};__webpack_modules__[623](0,__webpack_exports__,__webpack_require__)})();